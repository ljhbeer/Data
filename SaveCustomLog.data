[{"Date":"2017-08-09T00:00:00","_stocks":[{"Title":"自定义日志1 中天金融调整分析","Content":"时间：\r\n如下图\r\n\r\n[img src=\"sz000540_day__2017-08-01_84_bfq\"]\r\n大盘形势：\r\n\r\n量分析： 五天前出现天量 五天内量虽有所回调\r\n价分析：\r\n\r\n时分析： 已经调整，\r\n消息分析： 中天金融属于 \r\n\r\n个人意见：\r\n\r\n一周后的走势如下\r\n[img src=\"sz000540_day__2017-08-10_84_bfq\"]"},{"Title":"JHStock.FormMonit.TestStock(JHStock.Stock, [bool], [int])","Content":"public void TestStock2(Stock s, int staticdaylenght = 200) // for Debug Test\r\n\t\t{\r\n\t\t\tif (!_stockdata.HasKdata(s.ID))\r\n\t\t\t\treturn;\r\n\t\t\t// if select  then selectstockindex.add\r\n\t\t\tselectstock.Add(s);\r\n\t\t\tint[] kdclose = _stockdata.GetKD(s.ID).Select(r => (r.close)).ToArray();\r\n\t\t\tint[] kdvol = _stockdata.GetKD(s.ID).Select(r => (r.vol)).ToArray();\r\n\t\t\tList<double> ma60 = MA(0, 60, kdclose); //skip 60\r\n\t\t\tList<double> ma20 = MA(40, 20, kdclose);\r\n\t\t\tList<double> ma10 = MA(50, 10, kdclose);\r\n\t\t\tList<double> ma5 = MA(55, 5, kdclose);\r\n\r\n\t\t\tList<double> vma10 = MA(50, 10, kdvol);\r\n\t\t\tList<double> vma5 = MA(55, 5, kdvol);\r\n\r\n\t\t\tdouble now = vma5[0];\r\n\t\t\tList<double> dvma5rate = vma5.Select(r =>\r\n\t\t\t                                     { double ret = (r - now) / now; now = r; return ret; }).ToList();\r\n\t\t\tList<int> ma5L = dvma5rate.Select(r => (int)(r * 100 + (r > 0 ? 0.5 : -0.5))).ToList();\r\n\r\n\r\n\t\t\tList<double> vdvma5rate = MA(0, 5, dvma5rate.ToArray());\r\n\t\t\tList<int> intvdvma5rate = vdvma5rate.Select(r => (int)(r * 100 * 5 + (r > 0 ? 0.5 : -0.5))).ToList();\r\n\r\n\t\t\tList<Point> lines =\r\n\t\t\t\tHorizontalLines(ma5L, 18, 15, 12);  //firstbigbreak,secondbigbreak,thirdbigbreak\r\n\t\t\tlines = MergeLines(lines, ma5L, 24); //合并条件1. 两条线只差一点 2.该点数值在  24  以内  //以后再优化\r\n\t\t\t\r\n\t\t\t//for debug\r\n\t\t\tList<int> L = ma5L.Select(r => 0).ToList();\r\n\t\t\tforeach (Point p in lines)\r\n\t\t\t\tfor (int i = 0; i < p.Y; i++)\r\n\t\t\t\t\tL[i + p.X] = 1;\r\n\t\t\tstring str = \"date\\tclose\\tvol\\n\"\r\n\t\t\t\t+ _stockdata.GetKD(s.ID).Select(r => r.date + \"\\t\" + r.close + \"\\t\" + r.vol + \"\\n\").Aggregate((r1, r2) => r1 + r2)\r\n\t\t\t\t+ \"\\r\\nma60\\t\" + ma60.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2)\r\n\t\t\t\t+ \"\\r\\nma20\\t\" + ma20.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2)\r\n\t\t\t\t+ \"\\r\\nma10\\t\" + ma10.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2)\r\n\t\t\t\t+ \"\\r\\nma5\\t\" + ma5.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2)\r\n\t\t\t\t+ \"\\r\\nvma10\\t\" + vma10.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2)\r\n\t\t\t\t+ \"\\r\\nvma5\\t\" + vma5.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2)\r\n\r\n\t\t\t\t+ \"\\r\\ndvma5rate\\t\" + dvma5rate.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2)\r\n\t\t\t\t+ \"\\r\\nvdvma5rate\\t\" + vdvma5rate.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2)\r\n\t\t\t\t+ \"\\r\\nintvdvma5rate\\t\" + intvdvma5rate.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2)\r\n\t\t\t\t+ \"\\r\\nma5L\\t\" + ma5L.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2)\r\n\t\t\t\t+ \"\\r\\nL\\t\" + L.Select(r => r + \"\\t\").Aggregate((r1, r2) => r1 + r2);\r\n\t\t\tMFile.WriteAllText(s.Name + s.NumCode + \".txt\", str);\r\n\t\t}"}]}]